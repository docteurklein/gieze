<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/index.css">
    <link rel="stylesheet" href="https://unpkg.com/boltcss/bolt.css">
    <script async type="module" src="/index.js"></script>
  </head>
  <body>
    <h1>La Gièze</h1>

    <datalist data-fetch="/api/client" data-key="client" id="clients_list">
    </datalist>

    <datalist data-fetch="/api/product" data-key="product" id="products_list">
    </datalist>

    <h2>Bons de livraison</h2>

    <form method="POST" action="/api/bl">
      <input type="number" name="bl" placeholder="numéro" />
      <input type="text" name="client" list="clients_list" placeholder="client" />
      <input type="submit" />
    </form>

    <div class="bls" data-fetch="/api/bl?select=*,bl_line(*)&shipped_at=is.null&order=bl.desc" data-map="bls"></div> 

    <h2>Future factures</h2>
    <div data-fetch="/api/future_invoice" data-map="future_invoices"></div> 

    <h2>Historique des factures</h2>
    <div data-fetch="/api/invoice" data-map="_"></div> 

  </body>
</html>

